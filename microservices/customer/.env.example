# ============================================================================
# CUSTOMER SERVICE ENVIRONMENT VARIABLES
# ============================================================================
# Customer management microservice configuration
# ============================================================================

# ----------------------------------------------------------------------------
# SERVICE CONFIGURATION
# ----------------------------------------------------------------------------

SERVICE_NAME=customer-service
SERVICE_PORT=8002
SERVICE_HOST=0.0.0.0
ENVIRONMENT=development

# ----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ----------------------------------------------------------------------------

DATABASE_URL=postgresql://postgres:password@customer-db:5432/customer_db
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_ECHO=false

# ----------------------------------------------------------------------------
# REDIS CONFIGURATION
# ----------------------------------------------------------------------------

REDIS_URL=redis://:password@redis:6379/3
REDIS_CACHE_TTL=3600  # 1 hour
REDIS_CUSTOMER_PREFIX=customer:

# ----------------------------------------------------------------------------
# API CONFIGURATION
# ----------------------------------------------------------------------------

API_PREFIX=/api/v1
API_RATE_LIMIT=100/minute
API_TIMEOUT=30

# ----------------------------------------------------------------------------
# CUSTOMER SETTINGS
# ----------------------------------------------------------------------------

# Profile settings
ALLOW_DUPLICATE_EMAILS=false
ALLOW_DUPLICATE_PHONE=false
REQUIRE_PHONE_VERIFICATION=true
REQUIRE_ADDRESS_VALIDATION=true

# Customer types
CUSTOMER_TYPES=individual,business,enterprise
DEFAULT_CUSTOMER_TYPE=individual

# Loyalty program
LOYALTY_PROGRAM_ENABLED=true
LOYALTY_POINTS_PER_PURCHASE=10
LOYALTY_POINTS_PER_REFERRAL=100
LOYALTY_TIER_BRONZE=0
LOYALTY_TIER_SILVER=1000
LOYALTY_TIER_GOLD=5000
LOYALTY_TIER_PLATINUM=10000

# ----------------------------------------------------------------------------
# VALIDATION SETTINGS
# ----------------------------------------------------------------------------

# Colombian ID validation
VALIDATE_CEDULA=true
VALIDATE_NIT=true
VALIDATE_PASSPORT=false

# Phone validation
PHONE_COUNTRY_CODE=+57
PHONE_NUMBER_LENGTH=10
VALIDATE_PHONE_FORMAT=true

# Address validation
VALIDATE_POSTAL_CODE=true
POSTAL_CODE_API=https://api-colombia.com/api/v1/postalcode
GEOCODING_ENABLED=true
GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# ----------------------------------------------------------------------------
# SEARCH CONFIGURATION
# ----------------------------------------------------------------------------

# Elasticsearch
ELASTICSEARCH_ENABLED=false
ELASTICSEARCH_URL=http://elasticsearch:9200
ELASTICSEARCH_INDEX=customers
ELASTICSEARCH_SHARDS=2
ELASTICSEARCH_REPLICAS=1

# Search settings
SEARCH_MIN_QUERY_LENGTH=3
SEARCH_MAX_RESULTS=100
SEARCH_DEFAULT_PAGE_SIZE=20

# ----------------------------------------------------------------------------
# NOTIFICATION PREFERENCES
# ----------------------------------------------------------------------------

# Default notification settings
DEFAULT_EMAIL_NOTIFICATIONS=true
DEFAULT_SMS_NOTIFICATIONS=false
DEFAULT_PUSH_NOTIFICATIONS=false
DEFAULT_WHATSAPP_NOTIFICATIONS=false

# Notification types
NOTIFICATION_ORDER_UPDATES=true
NOTIFICATION_PROMOTIONS=true
NOTIFICATION_NEWSLETTERS=true
NOTIFICATION_ACCOUNT_UPDATES=true

# ----------------------------------------------------------------------------
# DATA PRIVACY
# ----------------------------------------------------------------------------

# GDPR/Data protection
GDPR_ENABLED=true
DATA_RETENTION_DAYS=2555  # 7 years
ALLOW_DATA_EXPORT=true
ALLOW_DATA_DELETION=true
ANONYMIZE_DELETED_DATA=true

# PII encryption
ENCRYPT_PII=true
PII_ENCRYPTION_KEY=your-32-byte-encryption-key-here
PII_FIELDS=ssn,credit_card,bank_account

# ----------------------------------------------------------------------------
# INTEGRATION SETTINGS
# ----------------------------------------------------------------------------

# CRM Integration
CRM_ENABLED=false
CRM_PROVIDER=hubspot  # hubspot, salesforce, pipedrive
CRM_API_KEY=your-crm-api-key
CRM_SYNC_INTERVAL=3600  # 1 hour

# Analytics
ANALYTICS_ENABLED=true
SEGMENT_WRITE_KEY=your-segment-write-key
MIXPANEL_TOKEN=your-mixpanel-token

# ----------------------------------------------------------------------------
# CUSTOMER SEGMENTATION
# ----------------------------------------------------------------------------

# Segmentation rules
ENABLE_AUTO_SEGMENTATION=true
SEGMENTATION_UPDATE_INTERVAL=86400  # Daily
HIGH_VALUE_THRESHOLD=1000000  # COP
CHURN_RISK_DAYS=90
VIP_CUSTOMER_THRESHOLD=10000000  # COP annual

# ----------------------------------------------------------------------------
# COMMUNICATION SETTINGS
# ----------------------------------------------------------------------------

# Email service
EMAIL_SERVICE_URL=http://email-service:8010/send
EMAIL_FROM_NAME=Quenty Customer Service
EMAIL_FROM_ADDRESS=customers@quenty.com

# SMS service
SMS_SERVICE_URL=http://sms-service:8011/send
SMS_FROM_NUMBER=+573001234567

# WhatsApp
WHATSAPP_ENABLED=false
WHATSAPP_BUSINESS_API_URL=https://api.whatsapp.com
WHATSAPP_ACCESS_TOKEN=your-whatsapp-token

# ----------------------------------------------------------------------------
# CUSTOMER SUPPORT
# ----------------------------------------------------------------------------

# Support ticket integration
SUPPORT_SYSTEM_ENABLED=true
SUPPORT_SYSTEM=zendesk  # zendesk, freshdesk, intercom
SUPPORT_API_KEY=your-support-api-key
SUPPORT_SUBDOMAIN=quenty.zendesk.com

# Live chat
LIVE_CHAT_ENABLED=false
LIVE_CHAT_PROVIDER=intercom
LIVE_CHAT_APP_ID=your-app-id

# ----------------------------------------------------------------------------
# MONITORING
# ----------------------------------------------------------------------------

METRICS_ENABLED=true
METRICS_PORT=9092
HEALTH_CHECK_PATH=/health
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/logs/customer-service.log

# ----------------------------------------------------------------------------
# CACHING
# ----------------------------------------------------------------------------

CACHE_ENABLED=true
CACHE_DEFAULT_TTL=3600
CACHE_MAX_SIZE=1000
CACHE_CUSTOMER_PROFILES=true
CACHE_CUSTOMER_ORDERS=true
CACHE_CUSTOMER_PREFERENCES=false

# ----------------------------------------------------------------------------
# BATCH OPERATIONS
# ----------------------------------------------------------------------------

BATCH_IMPORT_ENABLED=true
BATCH_IMPORT_MAX_SIZE=10000
BATCH_EXPORT_ENABLED=true
BATCH_EXPORT_MAX_SIZE=50000
BATCH_PROCESSING_CHUNK_SIZE=100

# ----------------------------------------------------------------------------
# WEBHOOKS
# ----------------------------------------------------------------------------

WEBHOOKS_ENABLED=true
WEBHOOK_TIMEOUT=10
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY=60

# Webhook events
WEBHOOK_CUSTOMER_CREATED=true
WEBHOOK_CUSTOMER_UPDATED=true
WEBHOOK_CUSTOMER_DELETED=true
WEBHOOK_CUSTOMER_VERIFIED=true
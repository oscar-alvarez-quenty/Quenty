# ============================================================================
# WOOCOMMERCE INTEGRATION SERVICE ENVIRONMENT VARIABLES
# ============================================================================
# WooCommerce WordPress e-commerce integration configuration
# ============================================================================

# ----------------------------------------------------------------------------
# SERVICE CONFIGURATION
# ----------------------------------------------------------------------------

SERVICE_NAME=woocommerce-integration
SERVICE_PORT=8021
SERVICE_HOST=0.0.0.0
ENVIRONMENT=development

# ----------------------------------------------------------------------------
# WOOCOMMERCE API CONFIGURATION
# ----------------------------------------------------------------------------

# Store credentials
WOOCOMMERCE_URL=https://your-store.com
WOOCOMMERCE_CONSUMER_KEY=ck_your_consumer_key
WOOCOMMERCE_CONSUMER_SECRET=cs_your_consumer_secret
WOOCOMMERCE_VERSION=wc/v3
WOOCOMMERCE_TIMEOUT=30
WOOCOMMERCE_VERIFY_SSL=true

# API settings
WOOCOMMERCE_WP_API=true  # Enable for older versions
WOOCOMMERCE_QUERY_STRING_AUTH=false  # Use for non-HTTPS
WOOCOMMERCE_API_RATE_LIMIT=10  # requests per second

# ----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ----------------------------------------------------------------------------

DATABASE_URL=postgresql://postgres:password@woo-db:5432/woocommerce_db
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# ----------------------------------------------------------------------------
# REDIS CONFIGURATION
# ----------------------------------------------------------------------------

REDIS_URL=redis://:password@redis:6379/11
REDIS_CACHE_TTL=3600
REDIS_QUEUE_NAME=woocommerce_sync

# ----------------------------------------------------------------------------
# WEBHOOK CONFIGURATION
# ----------------------------------------------------------------------------

# Webhook settings
WEBHOOK_ENABLED=true
WEBHOOK_SECRET=your-webhook-secret
WEBHOOK_DELIVERY_URL=https://api.quenty.com/webhooks/woocommerce

# Webhook events
WEBHOOK_ORDER_CREATED=true
WEBHOOK_ORDER_UPDATED=true
WEBHOOK_ORDER_DELETED=true
WEBHOOK_PRODUCT_CREATED=true
WEBHOOK_PRODUCT_UPDATED=true
WEBHOOK_PRODUCT_DELETED=true
WEBHOOK_CUSTOMER_CREATED=true
WEBHOOK_CUSTOMER_UPDATED=true

# ----------------------------------------------------------------------------
# SYNC CONFIGURATION
# ----------------------------------------------------------------------------

# Sync settings
SYNC_ENABLED=true
SYNC_INTERVAL=600  # 10 minutes
SYNC_BATCH_SIZE=100
SYNC_START_DATE=2024-01-01
SYNC_DIRECTION=bidirectional  # unidirectional, bidirectional

# Entity sync
SYNC_PRODUCTS=true
SYNC_ORDERS=true
SYNC_CUSTOMERS=true
SYNC_CATEGORIES=true
SYNC_TAGS=true
SYNC_ATTRIBUTES=true
SYNC_VARIATIONS=true
SYNC_COUPONS=true
SYNC_REVIEWS=false

# ----------------------------------------------------------------------------
# PRODUCT CONFIGURATION
# ----------------------------------------------------------------------------

# Product sync
AUTO_CREATE_PRODUCTS=false
AUTO_UPDATE_PRODUCTS=true
SYNC_PRODUCT_IMAGES=true
SYNC_PRODUCT_GALLERY=true
SYNC_DOWNLOADABLE_FILES=false

# Stock management
MANAGE_STOCK=true
STOCK_STATUS_SYNC=true
BACKORDERS_ALLOWED=false
LOW_STOCK_THRESHOLD=5

# Pricing
SYNC_REGULAR_PRICE=true
SYNC_SALE_PRICE=true
APPLY_PRICE_RULES=true
PRICE_MARKUP_PERCENTAGE=0

# ----------------------------------------------------------------------------
# ORDER CONFIGURATION
# ----------------------------------------------------------------------------

# Order processing
AUTO_IMPORT_ORDERS=true
ORDER_STATUS_PREFIX=wc-
CREATE_GUEST_CUSTOMERS=false

# Order status mapping
STATUS_PENDING=pending
STATUS_PROCESSING=processing
STATUS_ON_HOLD=on-hold
STATUS_COMPLETED=completed
STATUS_CANCELLED=cancelled
STATUS_REFUNDED=refunded
STATUS_FAILED=failed

# Payment methods
SYNC_PAYMENT_METHODS=true
PAYMENT_METHOD_MAPPING=true

# Shipping
SYNC_SHIPPING_METHODS=true
CALCULATE_SHIPPING=true
CREATE_SHIPPING_ZONES=false

# ----------------------------------------------------------------------------
# CUSTOMER CONFIGURATION
# ----------------------------------------------------------------------------

# Customer sync
SYNC_CUSTOMER_META=true
SYNC_BILLING_ADDRESS=true
SYNC_SHIPPING_ADDRESS=true
MERGE_DUPLICATE_EMAILS=true

# Customer fields
SYNC_CUSTOM_FIELDS=true
CUSTOM_FIELD_PREFIX=quenty_

# Roles
DEFAULT_CUSTOMER_ROLE=customer
SYNC_USER_ROLES=false

# ----------------------------------------------------------------------------
# TAX CONFIGURATION
# ----------------------------------------------------------------------------

# Tax settings
ENABLE_TAXES=true
PRICES_INCLUDE_TAX=false
TAX_BASED_ON=billing  # billing, shipping, base
DEFAULT_TAX_CLASS=standard

# Tax rates
SYNC_TAX_RATES=true
CREATE_TAX_RATES=false

# ----------------------------------------------------------------------------
# ADVANCED FEATURES
# ----------------------------------------------------------------------------

# Multi-currency
MULTI_CURRENCY_ENABLED=false
DEFAULT_CURRENCY=COP
SUPPORTED_CURRENCIES=COP,USD

# Multi-language
WPML_SUPPORT=false
POLYLANG_SUPPORT=false
DEFAULT_LANGUAGE=es

# Subscriptions (WooCommerce Subscriptions)
SUBSCRIPTIONS_ENABLED=false
SYNC_SUBSCRIPTIONS=false

# Bookings (WooCommerce Bookings)
BOOKINGS_ENABLED=false
SYNC_BOOKINGS=false

# Points and Rewards
POINTS_REWARDS_ENABLED=false
SYNC_POINTS_BALANCE=false

# ----------------------------------------------------------------------------
# CUSTOM POST TYPES
# ----------------------------------------------------------------------------

# Custom post types to sync
SYNC_CUSTOM_POST_TYPES=false
CUSTOM_POST_TYPES=

# ACF (Advanced Custom Fields)
ACF_ENABLED=false
SYNC_ACF_FIELDS=false

# ----------------------------------------------------------------------------
# PERFORMANCE
# ----------------------------------------------------------------------------

# Caching
CACHE_ENABLED=true
CACHE_PRODUCTS=true
CACHE_CUSTOMERS=true
CACHE_ORDERS=false
CACHE_TTL=3600

# Batch processing
BATCH_PROCESSING_ENABLED=true
BATCH_SIZE=50
PARALLEL_PROCESSING=false
MAX_WORKERS=4

# Rate limiting
RESPECT_RATE_LIMITS=true
RATE_LIMIT_DELAY=100  # ms

# ----------------------------------------------------------------------------
# ERROR HANDLING
# ----------------------------------------------------------------------------

# Retry configuration
MAX_RETRY_ATTEMPTS=3
RETRY_DELAY=1000  # ms
EXPONENTIAL_BACKOFF=true

# Error notifications
NOTIFY_ON_ERROR=true
ERROR_EMAIL=admin@quenty.com
ERROR_THRESHOLD=5

# Fallback options
USE_FALLBACK_ON_ERROR=true
FALLBACK_TO_CACHE=true

# ----------------------------------------------------------------------------
# LOGGING
# ----------------------------------------------------------------------------

LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/logs/woocommerce-integration.log
LOG_API_REQUESTS=false
LOG_API_RESPONSES=false
LOG_SYNC_DETAILS=true

# ----------------------------------------------------------------------------
# MONITORING
# ----------------------------------------------------------------------------

METRICS_ENABLED=true
METRICS_PORT=9095
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=60

# Alerts
ALERT_ON_SYNC_FAILURE=true
ALERT_ON_WEBHOOK_FAILURE=true
ALERT_ON_HIGH_LATENCY=true
LATENCY_THRESHOLD=5000  # ms

# ----------------------------------------------------------------------------
# SECURITY
# ----------------------------------------------------------------------------

# Authentication
API_KEY_REQUIRED=true
API_KEY=your-internal-api-key

# Data encryption
ENCRYPT_SENSITIVE_DATA=true
ENCRYPTION_KEY=your-32-byte-encryption-key

# SSL/TLS
VERIFY_SSL_CERTIFICATES=true
SSL_CA_BUNDLE_PATH=

# Request validation
VALIDATE_WEBHOOK_SIGNATURE=true
VALIDATE_REQUEST_ORIGIN=true

# ----------------------------------------------------------------------------
# WORDPRESS SPECIFIC
# ----------------------------------------------------------------------------

# WordPress REST API
WP_REST_API_PREFIX=wp-json
WP_REST_API_VERSION=v2

# WordPress database (direct access - optional)
WP_DB_ENABLED=false
WP_DB_HOST=wordpress-db
WP_DB_NAME=wordpress
WP_DB_USER=wp_user
WP_DB_PASSWORD=wp_password
WP_DB_PREFIX=wp_

# ----------------------------------------------------------------------------
# BACKUP & RECOVERY
# ----------------------------------------------------------------------------

BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 4 * * *"  # Daily at 4 AM
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE=local  # local, s3
BACKUP_PATH=/backups

# ----------------------------------------------------------------------------
# DEVELOPMENT
# ----------------------------------------------------------------------------

DEBUG_MODE=false
VERBOSE_LOGGING=false
TEST_MODE=false
SANDBOX_MODE=false
DRY_RUN=false
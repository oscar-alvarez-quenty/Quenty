# ============================================================================
# SHOPIFY INTEGRATION SERVICE ENVIRONMENT VARIABLES
# ============================================================================
# Shopify e-commerce platform integration configuration
# ============================================================================

# ----------------------------------------------------------------------------
# SERVICE CONFIGURATION
# ----------------------------------------------------------------------------

SERVICE_NAME=shopify-integration
SERVICE_PORT=8020
SERVICE_HOST=0.0.0.0
ENVIRONMENT=development

# ----------------------------------------------------------------------------
# SHOPIFY API CONFIGURATION
# ----------------------------------------------------------------------------

# Shop credentials (per store)
SHOPIFY_SHOP_DOMAIN=your-store.myshopify.com
SHOPIFY_API_KEY=your-api-key
SHOPIFY_API_SECRET=your-api-secret
SHOPIFY_ACCESS_TOKEN=your-access-token
SHOPIFY_WEBHOOK_SECRET=your-webhook-verification-secret

# API version
SHOPIFY_API_VERSION=2024-01
SHOPIFY_API_TIMEOUT=30

# Rate limiting
SHOPIFY_RATE_LIMIT_BUFFER=0.2  # 20% buffer
SHOPIFY_MAX_RETRIES=3
SHOPIFY_RETRY_DELAY=1000  # ms

# ----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ----------------------------------------------------------------------------

DATABASE_URL=postgresql://postgres:password@shopify-db:5432/shopify_db
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20

# ----------------------------------------------------------------------------
# REDIS CONFIGURATION
# ----------------------------------------------------------------------------

REDIS_URL=redis://:password@redis:6379/10
REDIS_CACHE_TTL=3600
REDIS_SESSION_TTL=86400

# ----------------------------------------------------------------------------
# WEBHOOK CONFIGURATION
# ----------------------------------------------------------------------------

# Webhook endpoints
WEBHOOK_BASE_URL=https://api.quenty.com/webhooks/shopify
WEBHOOK_VERIFY_SIGNATURE=true

# Webhook topics to subscribe
WEBHOOK_ORDERS_CREATE=true
WEBHOOK_ORDERS_UPDATED=true
WEBHOOK_ORDERS_CANCELLED=true
WEBHOOK_ORDERS_FULFILLED=true
WEBHOOK_PRODUCTS_CREATE=true
WEBHOOK_PRODUCTS_UPDATE=true
WEBHOOK_PRODUCTS_DELETE=true
WEBHOOK_CUSTOMERS_CREATE=true
WEBHOOK_CUSTOMERS_UPDATE=true
WEBHOOK_INVENTORY_LEVELS_UPDATE=true

# ----------------------------------------------------------------------------
# SYNC CONFIGURATION
# ----------------------------------------------------------------------------

# Sync settings
SYNC_ENABLED=true
SYNC_INTERVAL=300  # 5 minutes
SYNC_BATCH_SIZE=250  # Shopify's max per request
SYNC_START_DATE=2024-01-01

# Entity sync
SYNC_PRODUCTS=true
SYNC_ORDERS=true
SYNC_CUSTOMERS=true
SYNC_INVENTORY=true
SYNC_COLLECTIONS=true
SYNC_LOCATIONS=true

# Two-way sync
TWO_WAY_SYNC_ENABLED=false
UPDATE_SHOPIFY_INVENTORY=false
UPDATE_SHOPIFY_ORDERS=false
UPDATE_SHOPIFY_TRACKING=true

# ----------------------------------------------------------------------------
# PRODUCT MAPPING
# ----------------------------------------------------------------------------

# Product settings
AUTO_CREATE_PRODUCTS=false
AUTO_UPDATE_PRODUCTS=true
SYNC_PRODUCT_IMAGES=true
SYNC_PRODUCT_VARIANTS=true
SYNC_PRODUCT_METAFIELDS=true

# Pricing
SYNC_PRICES=true
PRICE_MARKUP_PERCENTAGE=0
USE_COMPARE_AT_PRICE=true
INCLUDE_TAX_IN_PRICE=false

# Inventory
TRACK_INVENTORY=true
INVENTORY_POLICY=deny  # deny, continue
LOW_INVENTORY_THRESHOLD=10

# ----------------------------------------------------------------------------
# ORDER PROCESSING
# ----------------------------------------------------------------------------

# Order settings
AUTO_IMPORT_ORDERS=true
ORDER_STATUS_MAPPING=true
CREATE_SHIPMENTS=true
UPDATE_TRACKING=true

# Payment mapping
MAP_PAYMENT_METHODS=true
AUTO_CAPTURE_PAYMENT=false
PROCESS_REFUNDS=true

# Fulfillment
AUTO_FULFILL_ORDERS=false
FULFILLMENT_SERVICE=quenty
NOTIFY_CUSTOMER_ON_FULFILLMENT=true

# ----------------------------------------------------------------------------
# CUSTOMER INTEGRATION
# ----------------------------------------------------------------------------

# Customer sync
SYNC_CUSTOMER_ADDRESSES=true
SYNC_CUSTOMER_TAGS=true
MERGE_DUPLICATE_CUSTOMERS=true
CREATE_CUSTOMER_ACCOUNTS=false

# Marketing
SYNC_MARKETING_CONSENT=true
SYNC_EMAIL_PREFERENCES=true
SYNC_SMS_PREFERENCES=false

# ----------------------------------------------------------------------------
# SHOPIFY PLUS FEATURES
# ----------------------------------------------------------------------------

# Multistore support
MULTISTORE_ENABLED=false
STORE_LOCALES=es,en
DEFAULT_LOCALE=es

# Scripts
SCRIPT_TAGS_ENABLED=false
SCRIPT_TAG_URL=https://cdn.quenty.com/shopify.js

# Shopify Flow
FLOW_TRIGGERS_ENABLED=false

# ----------------------------------------------------------------------------
# GRAPHQL CONFIGURATION
# ----------------------------------------------------------------------------

# GraphQL API
USE_GRAPHQL_API=true
GRAPHQL_COST_THRESHOLD=900  # Max 1000
GRAPHQL_QUERY_COMPLEXITY=10

# Bulk operations
BULK_OPERATIONS_ENABLED=true
BULK_OPERATION_POLL_INTERVAL=5000  # ms

# ----------------------------------------------------------------------------
# METAFIELDS CONFIGURATION
# ----------------------------------------------------------------------------

# Metafield namespaces
METAFIELD_NAMESPACE=quenty
SYNC_METAFIELDS=true

# Custom fields
CUSTOM_FIELD_PREFIX=quenty_
PRESERVE_CUSTOM_FIELDS=true

# ----------------------------------------------------------------------------
# REPORTING
# ----------------------------------------------------------------------------

# Analytics
TRACK_SALES_METRICS=true
TRACK_CONVERSION_RATES=true
TRACK_ABANDONED_CARTS=true

# Reports
DAILY_SYNC_REPORT=true
WEEKLY_ANALYTICS_REPORT=true
ERROR_REPORT_EMAIL=admin@quenty.com

# ----------------------------------------------------------------------------
# ERROR HANDLING
# ----------------------------------------------------------------------------

# Error recovery
AUTO_RETRY_FAILED_SYNCS=true
MAX_RETRY_ATTEMPTS=5
RETRY_BACKOFF_MULTIPLIER=2

# Error notifications
NOTIFY_ON_SYNC_ERROR=true
ERROR_NOTIFICATION_EMAIL=tech@quenty.com
ERROR_THRESHOLD=10  # errors before notification

# ----------------------------------------------------------------------------
# PERFORMANCE
# ----------------------------------------------------------------------------

# Caching
CACHE_ENABLED=true
CACHE_PRODUCTS=true
CACHE_COLLECTIONS=true
CACHE_TTL=3600

# Throttling
REQUEST_THROTTLING=true
MAX_CONCURRENT_REQUESTS=5
REQUEST_QUEUE_SIZE=100

# ----------------------------------------------------------------------------
# MONITORING
# ----------------------------------------------------------------------------

METRICS_ENABLED=true
METRICS_PORT=9094
HEALTH_CHECK_PATH=/health
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/logs/shopify-integration.log

# ----------------------------------------------------------------------------
# SECURITY
# ----------------------------------------------------------------------------

# Authentication
REQUIRE_API_KEY=true
API_KEY_HEADER=X-Shopify-API-Key

# Encryption
ENCRYPT_SENSITIVE_DATA=true
ENCRYPTION_KEY=your-32-byte-encryption-key

# IP restrictions
IP_WHITELIST_ENABLED=false
ALLOWED_IPS=

# ----------------------------------------------------------------------------
# BACKUP
# ----------------------------------------------------------------------------

BACKUP_ENABLED=true
BACKUP_INTERVAL=86400  # Daily
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE=s3
BACKUP_S3_BUCKET=quenty-shopify-backups
=======
# Database Configuration
DATABASE_URL=postgresql://shopify_user:shopify_pass@localhost:5432/shopify_db

# Redis Configuration
REDIS_URL=redis://localhost:6379/0

# Service Configuration
HOST=0.0.0.0
PORT=8000
LOG_LEVEL=INFO
RELOAD=false

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# Database Options
SQL_ECHO=false

# Shopify OAuth Configuration (for OAuth apps)
SHOPIFY_APP_KEY=your-app-key
SHOPIFY_APP_SECRET=your-app-secret
SHOPIFY_SCOPES=read_products,write_products,read_orders,write_orders,read_customers,write_customers,read_inventory,write_inventory

# Webhook Configuration
WEBHOOK_BASE_URL=https://your-domain.com

# Celery Configuration
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Security
SECRET_KEY=your-secret-key-here
ENCRYPTION_KEY=your-encryption-key-here

# Rate Limiting
RATE_LIMIT_CALLS_PER_SECOND=2.0

# Sync Configuration
SYNC_INTERVAL_MINUTES=30
SYNC_BATCH_SIZE=250

# Monitoring
SENTRY_DSN=
PROMETHEUS_ENABLED=true

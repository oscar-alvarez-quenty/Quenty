# ============================================================================
# QUENTY MAIN APPLICATION ENVIRONMENT VARIABLES
# ============================================================================
# Copy this file to .env and update with your actual values
# DO NOT commit .env to version control
# ============================================================================

# ----------------------------------------------------------------------------
# APPLICATION SETTINGS
# ----------------------------------------------------------------------------

# Environment: development, staging, production
ENVIRONMENT=development

# Application name and version
APP_NAME=Quenty
APP_VERSION=1.0.0

# API Settings
API_HOST=0.0.0.0
API_PORT=8000
API_PREFIX=/api/v1

# CORS Settings (comma-separated origins)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=*
CORS_ALLOW_HEADERS=*

# ----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ----------------------------------------------------------------------------

# PostgreSQL Main Database
DATABASE_URL=postgresql+asyncpg://postgres:quenty123@db:5432/quenty_db
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=40
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# Database for testing (optional)
TEST_DATABASE_URL=postgresql+asyncpg://postgres:quenty123@db:5432/quenty_test_db

# ----------------------------------------------------------------------------
# REDIS CONFIGURATION
# ----------------------------------------------------------------------------

# Redis for caching and session storage
REDIS_URL=redis://:quenty123@redis:6379/0
REDIS_POOL_MIN_SIZE=10
REDIS_POOL_MAX_SIZE=50
REDIS_TTL=3600  # Default TTL in seconds

# Redis for Celery (if different from main)
CELERY_REDIS_URL=redis://:quenty123@redis:6379/1

# ----------------------------------------------------------------------------
# SECURITY SETTINGS
# ----------------------------------------------------------------------------

# Secret key for JWT tokens (generate with: openssl rand -hex 32)
SECRET_KEY=change-this-to-a-random-secret-key-in-production

# JWT Configuration
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Password hashing
BCRYPT_ROUNDS=12

# API Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_REQUESTS_PER_HOUR=1000

# ----------------------------------------------------------------------------
# EMAIL CONFIGURATION
# ----------------------------------------------------------------------------

# SMTP Settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@example.com
SMTP_PASSWORD=your-app-specific-password
SMTP_FROM_EMAIL=noreply@quenty.com
SMTP_FROM_NAME=Quenty Platform
SMTP_USE_TLS=true

# Email templates
EMAIL_TEMPLATES_DIR=./templates/email

# ----------------------------------------------------------------------------
# AWS CONFIGURATION (for S3, SES, etc.)
# ----------------------------------------------------------------------------

AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1

# S3 Settings
S3_BUCKET_NAME=quenty-assets
S3_BUCKET_REGION=us-east-1
S3_ENDPOINT_URL=  # Leave empty for AWS, set for MinIO/LocalStack
S3_USE_SSL=true
S3_PRESIGNED_URL_EXPIRY=3600

# ----------------------------------------------------------------------------
# PAYMENT GATEWAY CONFIGURATION
# ----------------------------------------------------------------------------

# Stripe (for international payments)
STRIPE_PUBLIC_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# PayU (for Colombian payments)
PAYU_MERCHANT_ID=your-merchant-id
PAYU_ACCOUNT_ID=your-account-id
PAYU_API_KEY=your-api-key
PAYU_API_LOGIN=your-api-login
PAYU_ENVIRONMENT=sandbox  # sandbox or production

# Wompi (alternative Colombian payment)
WOMPI_PUBLIC_KEY=pub_test_...
WOMPI_PRIVATE_KEY=prv_test_...
WOMPI_ENVIRONMENT=sandbox

# ----------------------------------------------------------------------------
# MESSAGING AND NOTIFICATIONS
# ----------------------------------------------------------------------------

# RabbitMQ Configuration
RABBITMQ_URL=amqp://guest:guest@rabbitmq:5672//
RABBITMQ_EXCHANGE=quenty_events
RABBITMQ_QUEUE_TTL=86400000  # 24 hours in milliseconds

# Celery Configuration
CELERY_BROKER_URL=amqp://guest:guest@rabbitmq:5672//
CELERY_RESULT_BACKEND=redis://:quenty123@redis:6379/1
CELERY_TASK_TIME_LIMIT=300
CELERY_TASK_SOFT_TIME_LIMIT=240
CELERY_WORKER_CONCURRENCY=4

# Push Notifications (Firebase)
FIREBASE_PROJECT_ID=your-project-id
FIREBASE_PRIVATE_KEY=your-private-key
FIREBASE_CLIENT_EMAIL=firebase-adminsdk@project.iam.gserviceaccount.com

# SMS Configuration (Twilio)
TWILIO_ACCOUNT_SID=your-account-sid
TWILIO_AUTH_TOKEN=your-auth-token
TWILIO_FROM_NUMBER=+1234567890
TWILIO_MESSAGING_SERVICE_SID=your-messaging-service-sid

# ----------------------------------------------------------------------------
# MONITORING AND OBSERVABILITY
# ----------------------------------------------------------------------------

# Logging
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json or text
LOG_FILE_PATH=./logs/app.log
LOG_FILE_MAX_BYTES=10485760  # 10MB
LOG_FILE_BACKUP_COUNT=5

# Sentry (Error Tracking)
SENTRY_DSN=https://your-key@sentry.io/your-project
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# Prometheus Metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# Jaeger (Distributed Tracing)
JAEGER_ENABLED=true
JAEGER_HOST=jaeger
JAEGER_PORT=6831
JAEGER_SERVICE_NAME=quenty-api

# ----------------------------------------------------------------------------
# EXTERNAL API INTEGRATIONS
# ----------------------------------------------------------------------------

# Google Maps API
GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# Exchange Rate API
EXCHANGE_RATE_API_URL=https://api.exchangerate-api.com/v4/latest/USD
EXCHANGE_RATE_UPDATE_INTERVAL=3600  # Update every hour

# Weather API (optional)
WEATHER_API_KEY=your-openweather-api-key
WEATHER_API_URL=https://api.openweathermap.org/data/2.5/weather

# ----------------------------------------------------------------------------
# MACHINE LEARNING / AI
# ----------------------------------------------------------------------------

# OpenAI (for AI features)
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=150
OPENAI_TEMPERATURE=0.7

# Custom ML Model Server
ML_MODEL_SERVER_URL=http://ml-server:5000
ML_MODEL_VERSION=v1.0.0

# ----------------------------------------------------------------------------
# DEVELOPMENT SETTINGS
# ----------------------------------------------------------------------------

# Debug mode (NEVER enable in production)
DEBUG=false

# Hot reload
RELOAD=true

# Swagger/OpenAPI Documentation
DOCS_ENABLED=true
DOCS_URL=/docs
REDOC_URL=/redoc

# Testing
TEST_MODE=false
TEST_DATABASE_RESET=true

# ----------------------------------------------------------------------------
# FEATURE FLAGS
# ----------------------------------------------------------------------------

FEATURE_SOCIAL_LOGIN=true
FEATURE_TWO_FACTOR_AUTH=true
FEATURE_BULK_OPERATIONS=false
FEATURE_BETA_FEATURES=false
FEATURE_MAINTENANCE_MODE=false

# ----------------------------------------------------------------------------
# BUSINESS LOGIC SETTINGS
# ----------------------------------------------------------------------------

# Default currency
DEFAULT_CURRENCY=COP

# Tax settings
TAX_RATE=0.19  # 19% IVA in Colombia
APPLY_TAX=true

# Commission rates
PLATFORM_COMMISSION_RATE=0.05  # 5%
REFERRAL_COMMISSION_RATE=0.02  # 2%

# Limits
MAX_FILE_UPLOAD_SIZE=10485760  # 10MB in bytes
MAX_BULK_OPERATION_SIZE=1000
MAX_API_RESPONSE_SIZE=5242880  # 5MB

# Timeouts
DEFAULT_TIMEOUT=30  # seconds
LONG_RUNNING_TASK_TIMEOUT=300  # 5 minutes

# ----------------------------------------------------------------------------
# SCHEDULED TASKS
# ----------------------------------------------------------------------------

# Cleanup tasks
CLEANUP_OLD_SESSIONS_ENABLED=true
CLEANUP_OLD_SESSIONS_DAYS=30
CLEANUP_OLD_LOGS_ENABLED=true
CLEANUP_OLD_LOGS_DAYS=90

# Backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# ----------------------------------------------------------------------------
# LOCALIZATION
# ----------------------------------------------------------------------------

# Default locale
DEFAULT_LOCALE=es_CO
SUPPORTED_LOCALES=es_CO,en_US
DEFAULT_TIMEZONE=America/Bogota

# ----------------------------------------------------------------------------
# THIRD PARTY SERVICES
# ----------------------------------------------------------------------------

# Analytics
GOOGLE_ANALYTICS_ID=UA-XXXXXXXXX-X
MIXPANEL_TOKEN=your-mixpanel-token

# CDN
CDN_ENABLED=false
CDN_URL=https://cdn.quenty.com
CDN_PULL_ZONE=quenty-assets

# ----------------------------------------------------------------------------
# DOCKER SPECIFIC SETTINGS
# ----------------------------------------------------------------------------

# Container health check
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# Quenty Application Environment Variables
# Copy this file to .env and update with your actual values

# Carrier Integration Service
CARRIER_SECRET_KEY=your-carrier-secret-key-change-in-production
CARRIER_ENCRYPTION_KEY=32-byte-encryption-key-change-me

# Shopify Integration Service
SHOPIFY_SECRET_KEY=your-shopify-secret-key-change-in-production
SHOPIFY_ENCRYPTION_KEY=32-byte-encryption-key-change-me

# RAG Service
RAG_SECRET_KEY=your-rag-secret-key-change-in-production
OPENAI_API_KEY=your-openai-api-key-here

# MercadoLibre Integration Service
MELI_CLIENT_ID=your-mercadolibre-client-id
MELI_CLIENT_SECRET=your-mercadolibre-client-secret
MELI_SITE_ID=MCO
MELI_SECRET_KEY=your-meli-secret-key-change-in-production
MELI_ENCRYPTION_KEY=32-byte-encryption-key-change-me

# Auth Service (for microservices setup)
JWT_SECRET_KEY=your-jwt-secret-key-change-in-production
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
